#!/bin/bash

# Commit message hook for conventional commits

commit_message=$(cat $1)

# Pattern for conventional commits
pattern="^(feat|fix|docs|style|refactor|perf|test|chore|build|ci|revert)(\(.+\))?: .{1,}"

if ! echo "$commit_message" | grep -qE "$pattern"; then
    echo "‚ùå Invalid commit message format!"
    echo ""
    echo "Commit message must follow Conventional Commits format:"
    echo "  <type>(<scope>): <subject>"
    echo ""
    echo "Types:"
    echo "  feat:     New feature"
    echo "  fix:      Bug fix"
    echo "  docs:     Documentation"
    echo "  style:    Code style (formatting, etc)"
    echo "  refactor: Code refactoring"
    echo "  perf:     Performance improvement"
    echo "  test:     Tests"
    echo "  chore:    Maintenance tasks"
    echo "  build:    Build system changes"
    echo "  ci:       CI configuration"
    echo "  revert:   Revert a commit"
    echo ""
    echo "Example: feat: add user authentication"
    echo "Example: fix(api): resolve database connection issue"
    exit 1
fi